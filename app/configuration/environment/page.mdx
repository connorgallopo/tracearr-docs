---
title: Environment Variables Reference
description: Configure Tracearr with environment variables. Database, Redis, port, logging, and session settings for Docker and self-hosted deployments.
---

import { Callout } from "nextra/components"
import Image from "next/image"

# Environment Variables

Tracearr uses environment variables for core configuration.

## Required Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `DATABASE_URL` | PostgreSQL/TimescaleDB connection string | `postgres://user:pass@host:5432/tracearr` |
| `REDIS_URL` | Redis connection string | `redis://localhost:6379` |

## Optional Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `PORT` | HTTP server port | `3000` |
| `NODE_ENV` | Environment mode | `production` |
| `LOG_LEVEL` | Logging verbosity | `info` |
| `SESSION_SECRET` | Session encryption key | (generated) |
| `TZ` | Timezone | `UTC` |
| `CORS_ORIGIN` | Allowed CORS origin for API requests | `*` |
| `REDIS_PREFIX` | Redis key prefix for namespacing | no prefix |
| `CLAIM_CODE` | Claim code for first time setup | none |
| `BASE_PATH` | Base path when served under a subpath | none |

## Database Configuration

Tracearr requires TimescaleDB (PostgreSQL with the TimescaleDB extension) for time-series data storage.

```bash
DATABASE_URL=postgres://tracearr:password@localhost:5432/tracearr
```

## Redis Configuration

Redis is used for caching and background job queues.

```bash
REDIS_URL=redis://localhost:6379
```

For Redis with authentication:

```bash
REDIS_URL=redis://:password@localhost:6379
```

To enable Redis key prefixing:

<Callout type="warning">
Redis key prefixes must end with a delimiter (we recommend a colon ":") to ensure proper namespacing and avoid key collisions in shared Redis instances.
</Callout>

```bash
REDIS_PREFIX=myprefix:
```

## Claim Code

The `CLAIM_CODE` environment variable is used to protect the initial setup page. \
This is recommended when Tracearr is exposed to the public internet.

When set, the claim code will be printed to the log on startup.

<Image
  src="/images/claimcode-log.png"
  alt="Claim code"
  className="rounded-lg mt-6 shadow-md"
  width={541}
  height={232}
/>

Before you can access the setup page, you must enter the claim code.
<Image
  src="/images/claimcode-web.png"
  alt="Claim code"
  className="rounded-lg mt-6 shadow-md"
  width={513}
  height={360}
/>

## Base Path

Set `BASE_PATH` when you want Tracearr to be served under a subpath. \
This ensures all routes, assets, and links are prefixed correctly.

```bash
BASE_PATH=/tracearr
```

<Callout type="info">
You only need to set this if Tracearr is accessed through a reverse proxy under a subpath (e.g. `https://example.com/tracearr`). If Tracearr is served at the root, this can be left unset.
</Callout>
